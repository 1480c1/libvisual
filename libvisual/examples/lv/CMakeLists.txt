CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(lv)

SET(LV_VERSION_SUFFIX 0.5)

FIND_PACKAGE(PkgConfig)
PKG_CHECK_MODULES(LIBVISUAL libvisual-0.5 REQUIRED)

PKG_CHECK_MODULES(NIFTYLED niftyled)


FIND_PACKAGE(SDL)
IF(NOT SDL_FOUND)
  MESSAGE(FATAL_ERROR "SDL library is missing")
ENDIF(NOT SDL_FOUND)

INCLUDE_DIRECTORIES(
  ${LIBVISUAL_INCLUDE_DIRS}
  ${SDL_INCLUDE_DIR}
  ${NIFTYLED_INCLUDE_DIRS}
)

LINK_DIRECTORIES(
  ${LIBVISUAL_LIBRARY_DIRS}
)

SET(SOURCES
  lv.c
  display/display.c
  display/sdl_driver.c
  display/niftyled_driver.c
)

SET(CMAKE_C_FLAGS_DEBUG "-Wall -ggdb")

ADD_EXECUTABLE(lv ${SOURCES})

TARGET_LINK_LIBRARIES(lv
  ${LIBVISUAL_LIBRARIES}
  ${SDL_LIBRARY}
  ${NIFTYLED_LIBRARIES}
)
